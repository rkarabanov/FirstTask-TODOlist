{"version":3,"sources":["../../server/app.js"],"names":[],"mappings":";;;;;;uBAAoB,SAAS;;;;0BACN,aAAa;;;;oBACnB,MAAM;;;;gCACC,qBAAqB;;IAAjC,MAAM;;oCACK,yBAAyB;;IAApC,KAAK;;AAEjB,IAAM,GAAG,GAAG,2BAAS,CAAC;;AAEtB,MAAM,CAAC,eAAe,EAAE,CAAC;;AAEzB,IAAI,OAAO,YAAY,KAAK,WAAW,IAAI,YAAY,KAAK,IAAI,EAAE;AAC9D,QAAI,YAAY,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC,YAAY,CAAC;AAC7D,gBAAY,GAAG,IAAI,YAAY,CAAC,WAAW,CAAC,CAAC;CAChD;;AAED,GAAG,CAAC,GAAG,CAAC,wBAAW,IAAI,EAAE,CAAC,CAAC;;AAE3B,GAAG,CAAC,GAAG,CAAC,uBAAK,EAAC,MAAM,EAAE,GAAG,EAAC,CAAC,CAAC,CAAC;;AAG7B,GAAG,CAAC,GAAG,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAE,GAAG,EAAK;AAC5B,QAAI,KAAK,GAAC,GAAG,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC3B,WAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACnB,AAAC,SAAK,IAAE,SAAS,IAAE,KAAK,IAAE,IAAI,GAAE,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,GAAC,GAAG,CAAC,IAAI,EAAE,CAAC;CAC9D,CAAC,CAAC;;AAEH,GAAG,CAAC,IAAI,CAAC,QAAQ,EAAE,UAAC,GAAG,EAAE,GAAG,EAAK;AAC7B,UAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI,EAAK;AACjC,YAAG,IAAI,CAAC,MAAM,IAAE,CAAC,EAAC;AACd,eAAG,CAAC,GAAG,CAAC,OAAO,EAAC,qCAAqC,CAAC,CAAC;AACvD,eAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;SAC1B,MACG;AACA,wBAAY,CAAC,OAAO,CAAC,cAAc,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AAC9C,eAAG,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;SAC9B;KACA,CAAC,CAAC;CACV,CAAC,CAAC;;AAEH,GAAG,CAAC,GAAG,CAAC,YAAY,EAAE,UAAC,GAAG,EAAE,GAAG,EAAK;AAChC,OAAG,CAAC,IAAI,EAAE,CAAC;CACd,CAAC,CAAC;;AAGH,IAAM,MAAM,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,YAAM;AAClC,WAAO,CAAC,GAAG,yCAAyC,CAAC;CACxD,CAAC,CAAC","file":"app.js","sourcesContent":["import express from 'express';\r\nimport bodyParser from 'body-parser';\r\nimport cors from 'cors';\r\nimport * as userDB from './utils/UserDBUtils';\r\nimport * as valid from './validation/Validation';\r\n\r\nconst app = express();\r\n\r\nuserDB.setUpConnection();\r\n\r\nif (typeof localStorage === \"undefined\" || localStorage === null) {\r\n    var LocalStorage = require('node-localstorage').LocalStorage;\r\n    localStorage = new LocalStorage('./scratch');\r\n}\r\n\r\napp.use(bodyParser.json());\r\n\r\napp.use(cors({origin: \"*\"}));\r\n\r\n\r\napp.get('/login', (req, res) => {\r\n    let error=req.get(\"error\");\r\n    console.log(error);\r\n    (error!=undefined&&error!=null)?res.send(error):res.send();\r\n});\r\n\r\napp.post('/login', (req, res) => {\r\n    userDB.find(req.body).then((data) => {\r\n        if(data.length==0){\r\n            res.set(\"error\",\"Ошибка! Неверные и/или логин/пароль\");\r\n            res.redirect('/login');\r\n        }\r\n        else{\r\n            localStorage.setItem('userInSystem', data[0]);\r\n            res.redirect('/dashboard');\r\n        }\r\n        });\r\n});\r\n\r\napp.get('/dashboard', (req, res) => {\r\n    res.send();\r\n});\r\n\r\n\r\nconst server = app.listen(8080, () => {\r\n    console.log(`Server is up and running on port 8080`);\r\n});"]}